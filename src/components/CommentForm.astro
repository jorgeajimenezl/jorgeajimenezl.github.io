---
interface Props {
  postSlug?: string;
}

// const { postSlug } = Astro.props as Props;
import commentFormScript from "../scripts/comment-form.ts?url";
---

<h3 class="mt-8 text-base font-semibold text-black dark:text-white">Leave a comment</h3>
<form class="mt-3 space-y-3" onsubmit="event.preventDefault()" data-comment-form>
  <div class="flex items-center gap-2 border-b border-black/10 dark:border-white/10">
    <button type="button" role="tab" aria-selected="true" aria-controls="panel-write" data-tab="write"
      class="px-3 py-1.5 text-sm font-medium rounded-t-md text-black dark:text-white border border-b-0 border-transparent data-[active=true]:border-black/10 data-[active=true]:dark:border-white/10 data-[active=true]:bg-black/5 data-[active=true]:dark:bg-white/5"
      data-active="true"
    >Write</button>
    <button type="button" role="tab" aria-selected="false" aria-controls="panel-preview" data-tab="preview"
      class="px-3 py-1.5 text-sm font-medium rounded-t-md text-black/70 dark:text-white/70 hover:text-black dark:hover:text-white border border-b-0 border-transparent data-[active=true]:border-black/10 data-[active=true]:dark:border-white/10 data-[active=true]:bg-black/5 data-[active=true]:dark:bg-white/5"
    >Preview</button>
  </div>

  <div id="panel-write" role="tabpanel">
    <label for="comment" class="sr-only">Your comment</label>
    <textarea
      id="comment"
      name="comment"
      rows="6"
      placeholder="Write your commentâ€¦"
      class="w-full resize-y rounded-md border border-black/10 dark:border-white/10 bg-white/70 dark:bg-stone-900/50 p-3 text-sm text-black dark:text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-black/20 dark:focus:ring-white/30"
    ></textarea>
  </div>

  <div id="panel-preview" role="tabpanel" hidden
    class="panel-preview prose prose-sm dark:prose-invert max-w-none rounded-md border border-black/10 dark:border-white/10 bg-white/60 dark:bg-stone-900/40 p-3"
  >
    <p class="m-0 text-black/60 dark:text-white/60">Nothing to preview yet.</p>
  </div>

  <div class="flex items-center gap-3">
    <button
      type="submit"
      disabled
      class="inline-flex items-center rounded-md bg-black/80 px-3 py-1.5 text-sm font-medium text-white opacity-60 dark:bg-white/20 cursor-not-allowed"
    >
      Post comment
    </button>
    <span class="text-xs text-black/50 dark:text-white/50">Don't share personal information.</span>
  </div>
  <script is:inline type="module" src={commentFormScript}></script>
</form>
